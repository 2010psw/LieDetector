<!DOCTYPE HTML>

<html>
	<head>
		<title>Smart Lie DetectorğŸ“ˆ : Live</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<link rel="stylesheet" href="{{ url_for('static', filename='assets/css/main.css') }}">
		<link rel="shortcut icon" href="{{ url_for('static', filename='images/ê±°ì§“ë§ íƒì§€ê¸°.ico') }}">
	</head>
	<body class="is-preload">

		<!-- Header -->
			<header id="header">
				
<a class="logo" href="/">Smart Lie DetectorğŸ“ˆ</a>
				<nav>
					<a href="#menu">ë©”ë‰´</a>
				</nav>
			</header>

		<!-- Nav -->
			<nav id="menu">
				<ul class="links">
					<li><a href="/">ì‹œì‘í™”ë©´ğŸš©</a></li>
					<li><a href="/about">ëŒ€í•˜ì—¬..ğŸ’¬</a></li>
				</ul>
			</nav>

		<!-- Heading -->
			<div id="heading" >
				<h1>ê±°ì§“ë§ íƒì§€í•˜ê¸°ğŸ“‰</h1>
			</div>

		<!-- Main -->
			<section id="result" class="wrapper">
				<div class="inner">
					<div class="content">

					<!-- Elements -->
						<div class="row">
							
<div class="col-8 col-12-medium">
								<!-- Text -->

</div>
									</div>
									<h2 class="w3-panel w3-leftbar w3-border-red">â…°. í”¼ë¶€ ì „ê¸°ì €í•­ ê·¸ë˜í”„ğŸ”Œ</h2>

						<script src="{{ url_for('static',filename='assets/js/jquery.min.js') }}"></script>
<script type="text/javascript">
$(function () {
    $(document).ready(function() {
        Highcharts.setOptions({
            global: {
                useUTC: false
            }
        });

        var chart;
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'spline',
                marginRight: 10,
                events: {
                    load: function() {


                        var series = this.series[0];
                        setInterval(function() {
                            var x = (new Date()).getTime(),
                                y = parseInt(rqdata.gsr);
                            series.addPoint([x, y], true, true);
                        }, 1000);
                    }
                }
            },
            title: {
                text: '"í˜„ì¬ ë‹¹ì‹ ì˜ í”¼ë¶€ì „ê¸° ì €í•­ê°’ì…ë‹ˆë‹¤."'
            },

            xAxis: {
                type: 'datetime',
                tickPixelInterval: 150
            },
            yAxis: {
                title: {
                    text: 'Skin electrical resistance'
                },
                	max : 600, min : 0,
            },
            tooltip: {
                formatter: function() {
                        return '<b>'+ this.series.name +'</b><br/>'+
                        Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) +'<br/>'+
                        Highcharts.numberFormat(this.y, 2);
                }
            },
            legend: {
                enabled: false
            },
            exporting: {
                enabled: false
            },
            series: [{
                name: 'í”¼ë¶€ì „ê¸°ì €í•­ (GSR)',
                data: (function() {
                    var data = [],
                        time = (new Date()).getTime(),
                        i;

                    for (i = -19; i <= 0; i++) {
                        data.push({
                            x: time + i * 1000,
                            y: 0
                        });
                    }

                    return data;
                })()

            }]
        });
    });

});
</script>
<body>


<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

</body>
						<h2 class="w3-panel w3-leftbar w3-border-red">â…±. ì‹¬ë°•ìˆ˜ ê·¸ë˜í”„ğŸ’“</h2>

<script type="text/javascript">
$(function () {
    $(document).ready(function() {
        Highcharts.setOptions({
            global: {
                useUTC: false
            }
        });

        var chart;
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container2',
                type: 'spline',
                marginRight: 10,
                events: {
                    load: function() {


                        var series = this.series[0];
                        setInterval(function() {
                            var x = (new Date()).getTime(),
                                y = parseInt(rqdata.hrt);
                            series.addPoint([x, y], true, true);
                        }, 1000);
                    }
                }
            },
            title: {
                text: '"í˜„ì¬ ë‹¹ì‹ ì˜ ì‹¬ë°•ìˆ˜ì…ë‹ˆë‹¤."'
            },
            xAxis: {
                type: 'datetime',
                tickPixelInterval: 150
            },
            yAxis: {
                title: {
                    text: 'Heart rate'
                },
                max : 130, min : 0,
            },
            tooltip: {
                formatter: function() {
                        return '<b>'+ this.series.name +'</b><br/>'+
                        Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) +'<br/>'+
                        Highcharts.numberFormat(this.y, 2);
                }
            },
            legend: {
                enabled: false
            },
            exporting: {
                enabled: false
            },
            series: [{
                name: 'ì‹¬ë°•ìˆ˜ (HRT)',
                data: (function() {
                    var data = [],
                        time = (new Date()).getTime(),
                        i;

                    for (i = -19; i <= 0; i++) {
                        data.push({
                            x: time + i * 1000,
                            y: 0
                        });
                    }
                    return data;
                })()
            }]
        });
    });

});
</script>
<body>
<div id="container2" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
</body>




			<h2 class="w3-panel w3-leftbar w3-border-red">â…². ì§„ë‹¨í‘œğŸ“‹</h2>

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<body>

<div class="w3-container">



  <table class="w3-table-all">
    <tr>

   <th>ì° ë†ë„</th>
      <th>ê±°ì§“ë§ ë†ë„</th>
      <th>ë°”ë¡œ ë‹µí•˜ëŠ” ìˆœë°œë ¥</th>
      <th>ì•„ë‘ì´ë…¸ ì¸¡ì •ê°’</th>
    </tr>
    <tr>
      <td>78%</td>
      <td>87%</td>
      <td>ë§¤ìš°ë¹ ë¦„</td>
<td>75.5</td>
  </table>
</div>
<p></p>

<p></p>
<div class="w3-container w3-center">
<a href="/sil" class="button icon fa-industry">ë°ì´í„° ì…ë ¥</a>&nbsp;&nbsp;
<button id="ls_btn" class="button icon fa-download">LSTM ì ìš©</button>
				</div>
</body>
</html>
	<script>


	</script>
  <script>
	var gArr = new Array();
	var hArr = new Array();




	setInterval(function(){
		var btn = document.querySelector('button');

        var xhr = new XMLHttpRequest();

        xhr.onreadystatechange = function() {
          if(xhr.readyState === 4 && xhr.status === 200) {
             rqdata = JSON.parse(xhr.responseText);
             //console.log('gsr = ' + parseInt(rqdata.gsr));
             //console.log('hrt = ' + parseInt(rqdata.hrt));
             setrq(rqdata,JSON.parse(xhr.responseText))
             if(gArr.length === 10){
			 	gArr.shift();
			 }
			 if(hArr.length===10){
				hArr.shift()
			 }
			 gArr.push(rqdata.gsr);
			 hArr.push(rqdata.hrt);
			 console.log('gsr');
			 console.log(gArr);
			 console.log('hrt');
			 console.log(hArr);
          }
        }
        xhr.open('GET', '/request_data', true);
        xhr.send(null);
	}, 1200)


    var rqdata = null;
    function setrq(data1,data2){
  		data1 = data2;
  	}








    window.onload=function() {
	  var t_btn = document.getElementById("true_btn");
	  var f_btn = document.getElementById("false_btn");

	  var biodata = new Object();
	  var ls_btn = document.getElementById('ls_btn');

	  ls_btn.addEventListener('click', function() {
		  if(gArr.length===10){
				var form = document.createElement("form");
			biodata.gsr = gArr;
			biodata.hrt = hArr;
			var ls_jsonData = JSON.stringify(biodata);
			 form.setAttribute("charset", "UTF-8");

			 form.setAttribute("method", "Post");  //Post ë°©ì‹

			 form.setAttribute("action", "/result"); //ìš”ì²­ ë³´ë‚¼ ì£¼ì†Œ



			 var hiddenField = document.createElement("input");

			 hiddenField.setAttribute("type", "hidden");

			 hiddenField.setAttribute("name", "gsr");

			 hiddenField.setAttribute("value", gArr);

			 form.appendChild(hiddenField);



			 hiddenField = document.createElement("input");

			 hiddenField.setAttribute("type", "hidden");

			 hiddenField.setAttribute("name", "hrt");

			 hiddenField.setAttribute("value", hArr);

			 form.appendChild(hiddenField);



			 document.body.appendChild(form);

			 form.submit();

			}else {
				alert('wait');
			}




















      	});
      t_btn.addEventListener('click', function() {

            var box = document.querySelector('.box');
             var a = rqdata;
            box.innerHTML = a.gsr;

      });
      t_btn.addEventListener('click', function() {
		if(gArr.length===10 && hArr.length===10){

			biodata.gsr = gArr;
			biodata.hrt = hArr;
			biodata.label = 't';

			var jsonData = JSON.stringify(biodata);
			console.log(jsonData);
			$.ajax({
					type : "POST",                               //1
					url : "http://127.0.0.1:5000/savedata",                          //2
					dataType : 'json',                           //3
					contentType : 'application/json',            //4
					data : jsonData,                 //5
					success : successCall,                       //6
					error   : errorCall                          //7

			});
			function successCall(){
				console.log("ì „ì†¡ì„±ê³µ");
			}

			function errorCall(){
				console.log("ì „ì†¡ì‹¤íŒ¨");
			}










		}else{
			alert("ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”");
		}

      });

      f_btn.addEventListener('click', function() {
            if(gArr.length===10 && hArr.length===10){

			biodata.gsr = gArr;
			biodata.hrt = hArr;
			biodata.label = 'f';


			var jsonData = JSON.stringify(biodata);
			console.log(jsonData);
			$.ajax({
					type : "POST",                               //1
					url : "http://127.0.0.1:5000/savedata",                          //2
					dataType : 'json',                           //3
					contentType : 'application/json',            //4
					data : jsonData,                 //5
					success : successCall,                       //6
					error   : errorCall                          //7

			});
			function successCall(){
				console.log("ì „ì†¡ì„±ê³µ");
			}

			function errorCall(){
				console.log("ì „ì†¡ì‹¤íŒ¨");
			}





			}else{
				alert("ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”");
			}
      });

    }



  </script>
</html>


	
	</code></pre>

							</div>
						</div>
					</div>
				</div>
			</section>

		<!-- Footer -->
			<footer id="footer">
				<div class="inner">
					<div class="content">
						<section>
							<h3>ìŠ¤ë§ˆíŠ¸ ê±°ì§“ë§ íƒì§€ê¸° (SMART LIE DETECTOR)</h3>
							<p>ì„ ë¬¸ëŒ€í•™êµ ì»´í“¨í„°ê³µí•™ë¶€ 4í•™ë…„ ì¡¸ì—…ì‘í’ˆ "ê·œê±´ì¬ìƒíŒ€"</p>
						</section>
						
						<section>
							<h4>ê¹ƒ í—ˆë¸Œ</h4>
							<ul class="plain">
								
								<li><a href="https://github.com/2010psw/LieDetector"><i class="icon fa-github">&nbsp;</i>Github</a></li>
							</ul>
						</section>
					</div>
					<div class="copyright">
						&copy; Create by ê·œê±´ì¬ìƒ.</a>
					</div>
				</div>
			</footer>

		<!-- Scripts -->

    <script src="{{ url_for('static',filename='assets/js/jquery.min.js') }}"></script>
	<script src="{{ url_for('static',filename='assets/js/browser.min.js') }}"></script>
	<script src="{{ url_for('static',filename='assets/js/breakpoints.min.js') }}"></script>
	<script src="{{ url_for('static',filename='assets/js/util.js') }}"></script>
	<script src="{{ url_for('static',filename='assets/js/main.js') }}"></script>
<script src="{{ url_for('static',filename='assets/js/exporting.js') }}"></script>
<script src="{{ url_for('static',filename='assets/js/highcharts.js') }}"></script>


	</body>
</html>